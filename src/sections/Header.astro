---
import Action from "@/components/Action.astro";
import type { HeaderData } from "@/config/landing.interface";
interface Props {
  data: HeaderData;
}

const { data } = Astro.props;
---

<header
  id="navbar"
  class="w-full transition duration-300 justify-between fixed h-20 z-50 flex items-center bg-white shadow"
>
  <div class="text-nowrap ml-4">
    <img src="/logo.jpg" alt="" class="w-[220px]" />
  </div>
  <button
    id="mobile-menu-button"
    class="block lg:hidden px-4 focus:outline-none"
  >
    <svg
      class="w-6 h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16m-7 6h7"></path>
    </svg>
  </button>
  <nav
    id="mobile-menu"
    class="hidden lg:flex flex-grow  lg:items-center lg:w-auto"
  >
    <ul
      class="flex flex-col lg:flex-row lg:flex-grow lg:justify-end lg:gap-x-14"
    >
      {
        data.links.map((item) => (
          <li class="text-lg hover:scale-110 hover:opacity-80">
            <Action as="a" href={item.href}>
              {item.label}
            </Action>
          </li>
        ))
      }
    </ul>
  </nav>
</header>

<script>
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");

  mobileMenuButton.addEventListener("click", function () {
    mobileMenu.classList.toggle("hidden");
    if (!mobileMenu.classList.contains("hidden")) {
      // Aggiungi uno sfondo al body per coprire il contenuto principale quando il menu è aperto
      document.body.classList.add("overflow-hidden");
    } else {
      // Rimuovi lo sfondo al body quando il menu è chiuso
      document.body.classList.remove("overflow-hidden");
    }
  });

  window.addEventListener("scroll", function () {
    const navbar = document.getElementById("navbar");
    if (!navbar) return;

    if (window.scrollY >= 20) {
      navbar.classList.remove("border-b-transparent");
      navbar.classList.remove("bg-transparent");
      navbar.classList.add("border-b");
      navbar.classList.add("border-b-slate-300");
      navbar.classList.add("bg-white");
    } else {
      navbar.classList.remove("border-b");
      navbar.classList.remove("border-b-slate-300");
      navbar.classList.remove("bg-white");
      navbar.classList.add("border-b-transparent");
      navbar.classList.add("bg-transparent");
    }
  });
</script>
